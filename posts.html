<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Posts</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
    <script src="/javascript/auth.js"></script>
    <script>
      if (isLoggedIn() === false) window.location.replace("/");
    </script>
  </head>
  <body>
    <nav>
      <a href="index.html">Home</a>
      <a href="registration.html">Register</a>
      <a href="posts.html">Posts</a>
      <a href="profile.html">Profile</a>
    </nav>
  
<button id="logoutBtn" onclick="logout();">LogOut</button>
    <div>
        <button id="postBox">Blast</button>
    </div>

    <div class="container">
        <div class="row">
            <div class="col"></div>
            <div id="postsList" class="col">
        </div>
    </div>
    </div>
    <script>
      "use strict";

      const postsList = document.querySelector("#postsList");
      const loginData = getLoginData();
      const options = {
        method: "GET",
        headers: {
          Authorization: `Bearer ${loginData.token}`,
        },
      };

      fetch(apiBaseURL + "/api/posts", options)
        .then((response) => response.json())
        .then((list) => {
          for (const userPost of list) {
            let postItem = document.createElement("div");
            postItem.id = "postItem";
            postItem.className = "pb-3 mt-2";
            postItem.innerText = `${userPost.username} : ${userPost.text}`;
            let timePosted = document.createElement("div");
            timePosted.id = "timePosted";
            timePosted.innerText = `${userPost.createdAt}`;
            let postItemContainer = document.createElement("div");
            postItemContainer.id = "postItemContainer";
            postItemContainer.className = "text-center mx-5 pt-3 pb-5 mb-4 bg-body-tertiary";
            postItemContainer.style = "border-size"
            postItemContainer.append(postItem, timePosted);
            postsList.appendChild(postItemContainer);

          }

        function post(params) {
            
        }
        });
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz" crossorigin="anonymous"></script>
  </body>
</html>
